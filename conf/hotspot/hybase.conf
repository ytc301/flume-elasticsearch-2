# hybase.conf: A single-node Flume configuration

# Name the components on this agent
agent.sources = hybase
agent.channels = hotspot_channel
agent.sinks = forward_to_hotspot

agent.sources.hybase.channels = hotspot_channel
agent.sources.hybase.selector.type = replicating


agent.sinks.forward_to_hotspot.channel = hotspot_channel


agent.sources.hybase.type = com.trs.smas.flume.TRSHybaseSource
agent.sources.hybase.url = http://192.168.200.10:5555
agent.sources.hybase.username = datasearch2013nov
agent.sources.hybase.password = hybasesearch@)!#nov2013
agent.sources.hybase.database = dc_chuantong_0819
agent.sources.hybase.filter = 
agent.sources.hybase.watermark = HYBASE_LOADTIME_A
agent.sources.hybase.from = 2014/06/11 14:00:00
agent.sources.hybase.partition = IR_URLDATE
agent.sources.hybase.delay = -10
agent.sources.hybase.step = 60
agent.sources.hybase.batchSize = 1000
agent.sources.hybase.headers = IR_URLDATE;
agent.sources.hybase.exportTmp = /home/spark/apps/apache-flume-1.4.0-bin/data/hotspot/sources/
agent.sources.hybase.checkpoint = /home/spark/apps/apache-flume-1.4.0-bin/data/hotspot/sources/checkpoint
agent.sources.hybase.body = <REC>\n<IR_ABSTRACT>={IR_ABSTRACT}\n<IR_AUTHORS>={IR_AUTHORS}\n<IR_BBSNUM>={IR_BBSNUM}\n<IR_CATALOG>={IR_CATALOG}\n<IR_CATALOG1>={IR_CATALOG1}\n<IR_CATALOG2>={IR_CATALOG2}\n<IR_CHANNEL>={IR_CHANNEL}\n<IR_CHARSET>={IR_CHARSET}\n<IR_CONTENT>={IR_CONTENT}\n<IR_DELEOPERATOR>={IR_DELEOPERATOR}\n<IR_DELETIME>={IR_DELETIME}\n<IR_DISTRICT>={IR_DISTRICT}\n<IR_DOCLENGTH>={IR_DOCLENGTH}\n<IR_EXPORTID>={IR_EXPORTID}\n<IR_EXPORTNAME>={IR_EXPORTNAME}\n<IR_EXPORTTYPE>={IR_EXPORTTYPE}\n<IR_EXTNAME>={IR_EXTNAME}\n<IR_FORMAT>={IR_FORMAT}\n<IR_GROUPNAME>={IR_GROUPNAME}\n<IR_HKEY>={IR_HKEY}\n<IR_IMAGEFLAG>={IR_IMAGEFLAG}\n<IR_ISTRASH>={IR_ISTRASH}\n<IR_KEYWORDS>={IR_KEYWORDS}\n<IR_LASTTIME>={IR_LASTTIME}\n<IR_LOADTIME>={IR_LOADTIME}\n<IR_MIMETYPE>={IR_MIMETYPE}\n<IR_NRESERVED1>={IR_NRESERVED1}\n<IR_NRESERVED2>={IR_NRESERVED2}\n<IR_NRESERVED3>={IR_NRESERVED3}\n<IR_PAGELEVEL>={IR_PAGELEVEL}\n<IR_PAGERANK>={IR_PAGERANK}\n<IR_PKEY>={IR_PKEY}\n<IR_PUBTYPE>={IR_PUBTYPE}\n<IR_SERVICEID>={IR_SERVICEID}\n<IR_SID>={IR_SID}\n<IR_SIMFLAG>={IR_SIMFLAG}\n<IR_SIMRANK>={IR_SIMRANK}\n<IR_SITENAME>={IR_SITENAME}\n<IR_SRCNAME>={IR_SRCNAME}\n<IR_SRESERVED1>={IR_SRESERVED1}\n<IR_SRESERVED2>={IR_SRESERVED2}\n<IR_SRESERVED3>={IR_SRESERVED3}\n<IR_STARTID>={IR_STARTID}\n<IR_STATUS>={IR_STATUS}\n<IR_TABLEFLAG>={IR_TABLEFLAG}\n<IR_URLBODY>={IR_URLBODY}\n<IR_URLIMAGE>={IR_URLIMAGE}\n<IR_URLLEVEL>={IR_URLLEVEL}\n<IR_URLNAME>={IR_URLNAME}\n<IR_URLSIZE>={IR_URLSIZE}\n<IR_URLTABLE>={IR_URLTABLE}\n<IR_URLTIME>={IR_URLTIME}\n<IR_URLTITLE>={IR_URLTITLE}\n<IR_URLTOPIC>={IR_URLTOPIC}\n<IR_VRESERVED1>={IR_VRESERVED1}\n<IR_VRESERVED2>={IR_VRESERVED2}\n<IR_VRESERVED3>={IR_VRESERVED3}\n<IR_VRESERVED4>={IR_VRESERVED4}\n<IR_WCMID>={IR_WCMID}\n<CATALOG_AREA>={CATALOG_AREA}\n<MD5TAG>={MD5TAG}\n<SIMFLAG>={SIMFLAG}\n<SIMID>={SIMID}\n<TITLE_SIMFLAG>={TITLE_SIMFLAG}\n<TITLE_SIMID>={TITLE_SIMID}\n<URLNAMEMD5>={URLNAMEMD5}\n<IR_GW_LOADTIME>={HYBASE_LOADTIME_A}\n

agent.sources.hybase.interceptors = date_formatter time_filter
agent.sources.hybase.interceptors.date_formatter.type = com.trs.smas.flume.DateFormatInterceptor$Builder
agent.sources.hybase.interceptors.date_formatter.pattern = yyyy/MM/dd HH:mm:ss
agent.sources.hybase.interceptors.date_formatter.format = yyyy/MM/dd
agent.sources.hybase.interceptors.date_formatter.from = IR_URLDATE

agent.sources.hybase.interceptors.time_filter.type = com.trs.smas.flume.TimeFilterInterceptor$Builder
agent.sources.hybase.interceptors.time_filter.filter = IR_URLDATE
agent.sources.hybase.interceptors.time_filter.format = yyyy/MM/dd
agent.sources.hybase.interceptors.time_filter.range = 7


agent.sinks.forward_to_hotspot.type = avro
agent.sinks.forward_to_hotspot.hostname = 127.0.0.1
agent.sinks.forward_to_hotspot.port = 10000
agent.sinks.forword_to_hotspot.connect-timeout = 200000
agent.sinks.forword_to_hotspot.request-timeout = 200000

agent.channels.hotspot_channel.type = file
agent.channels.hotspot_channel.checkpointDir = /home/spark/apps/apache-flume-1.4.0-bin/data/hotspot/hotspot_channel/checkpoint
agent.channels.hotspot_channel.dataDirs = /home/spark/apps/apache-flume-1.4.0-bin/data/hotspot/hotspot_channel/data
agent.channels.hotspot_channel.write-timeout = 60
agent.channels.hotspot_channel.capacity = 1000000
agent.channels.hotspot_channel.transactionCapacity = 1000000
